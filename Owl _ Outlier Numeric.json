{"paragraphs":[{"title":"Outlier -> Key & Date","text":"%spark\nimport com.owl.common.Props\nimport com.owl.core.Owl\nimport spark.implicits._\n\nval df = Seq(\n  (\"Kirk\", \"Haslbeck\", \"2018-02-24 8:30:45\", 18),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-23 8:30:45\", 11),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-22 8:30:45\", 10),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-21 8:30:45\", 12),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-20 8:30:45\", 10),\n  (\"Cat\",  \"Stevens\",  \"2018-02-20 8:30:45\", 44),\n  (\"Cat\",  \"Stevens\",  \"2018-02-20 8:30:45\", 47),\n  (\"Cat\",  \"Stevens\",  \"2018-02-24 8:30:45\", 144)\n).toDF(\"fname\",\"lname\", \"app_date\", \"price\")\n\n// Owl Props\nval props = new Props()\n  props.dl = true\n  props.dlLb = 5\n  props.dlKey = \"fname\"\n  props.timeBin = \"DAY\"\n  props.dateCol = \"app_date\"\n  props.dataset = \"dataset_outlier\"\n\n// Owl outliers\nval outlierDF  = new Owl(df, props)\n    .outliersDF(dlKey = \"fname\", dlLb = 5, dateCol = \"app_date\", runDate = \"2018-02-24\")\n\noutlierDF.show\noutlierDF.createOrReplaceTempView(\"outliers\")","user":"anonymous","dateUpdated":"2018-07-16T15:01:13-0400","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","tableHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import com.owl.common.Props\nimport com.owl.core.Owl\nimport spark.implicits._\ndf: org.apache.spark.sql.DataFrame = [fname: string, lname: string ... 2 more fields]\nprops: com.owl.common.Props = com.owl.common.Props@251ae49e\nprops.dl: Boolean = true\nprops.dlLb: Int = 5\nprops.dlKey: String = fname\nprops.timeBin: String = DAY\nprops.dateCol: String = app_date\nprops.dataset: String = dataset_outlier\n+-----+--------+------------------+-----+----------+\n|fname|   lname|          app_date|price|  time_bin|\n+-----+--------+------------------+-----+----------+\n| Kirk|Haslbeck|2018-02-24 8:30:45|   18|2018-02-24|\n| Kirk|Haslbeck|2018-02-23 8:30:45|   11|2018-02-23|\n| Kirk|Haslbeck|2018-02-22 8:30:45|   10|2018-02-22|\n| Kirk|Haslbeck|2018-02-21 8:30:45|   12|2018-02-21|\n| Kirk|Haslbeck|2018-02-20 8:30:45|   10|2018-02-20|\n|  Cat| Stevens|2018-02-20 8:30:45|   44|2018-02-20|\n|  Cat| Stevens|2018-02-20 8:30:45|   47|2018-02-20|\n|  Cat| Stevens|2018-02-24 8:30:45|  144|2018-02-24|\n+-----+--------+------------------+-----+----------+\n\n+-----+--------------------+\n|fname|           price_iqr|\n+-----+--------------------+\n| Kirk| [10.0, 10.5, 11.55]|\n|  Cat|[44.4499999999999...|\n+-----+--------------------+\n\n+-----+--------+------------------+-----+----------+\n|fname|   lname|          app_date|price|  time_bin|\n+-----+--------+------------------+-----+----------+\n| Kirk|Haslbeck|2018-02-24 8:30:45|   18|2018-02-24|\n|  Cat| Stevens|2018-02-24 8:30:45|  144|2018-02-24|\n+-----+--------+------------------+-----+----------+\n\n+-----+--------+------------------+-----+----------+-----+--------------------+\n|fname|   lname|          app_date|price|  time_bin|fname|           price_iqr|\n+-----+--------+------------------+-----+----------+-----+--------------------+\n| Kirk|Haslbeck|2018-02-24 8:30:45|   18|2018-02-24| Kirk| [10.0, 10.5, 11.55]|\n|  Cat| Stevens|2018-02-24 8:30:45|  144|2018-02-24|  Cat|[44.4499999999999...|\n+-----+--------+------------------+-----+----------+-----+--------------------+\n\noutlierDF: org.apache.spark.sql.DataFrame = [key: string, column: string ... 3 more fields]\n+----+------+-----+----------+----------+\n| key|column|value|prediction|confidence|\n+----+------+-----+----------+----------+\n| Cat| price|144.0|      45.5|        34|\n|Kirk| price| 18.0|      10.5|        77|\n+----+------+-----+----------+----------+\n\n"}]},"apps":[],"jobName":"paragraph_1528604564469_-1695802618","id":"20180610-002244_1679304228","dateCreated":"2018-06-10T00:22:44-0400","dateStarted":"2018-06-24T15:29:56-0400","dateFinished":"2018-06-24T15:30:01-0400","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:13997"},{"text":"%sql\nselect * from outliers","user":"anonymous","dateUpdated":"2018-06-24T15:29:56-0400","config":{"colWidth":6,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":426,"optionOpen":false}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"key\tcolumn\tvalue\tprediction\tconfidence\nCat\tprice\t144.0\t45.5\t34\nKirk\tprice\t18.0\t10.5\t77\n"}]},"apps":[],"jobName":"paragraph_1528604600051_55851854","id":"20180610-002320_405100544","dateCreated":"2018-06-10T00:23:20-0400","dateStarted":"2018-06-24T15:29:56-0400","dateFinished":"2018-06-24T15:30:01-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13998"},{"title":"Outlier -> Key  (no Date)","text":"val df1 = Seq(\n  (\"Kirk\", \"Haslbeck\", \"2018-02-24 8:30:45\", 18),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-23 8:30:45\", 18),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-22 8:30:45\", 18),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-21 8:30:45\",  8),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-21 8:30:45\",  7),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-21 8:30:45\",  20),\n  (\"Kirk\", \"Haslbeck\", \"2018-02-20 8:30:45\", 188),  // raise this outlier for older date\n\n  (\"Cat\",  \"Stevens\",  \"2018-02-20 8:30:45\", 21),\n  (\"Cat\",  \"Stevens\",  \"2018-02-20 8:30:45\", 25),\n  (\"Cat\",  \"Stevens\",  \"2018-02-20 8:30:45\", 27),\n  (\"Cat\",  \"Stevens\",  \"2018-02-20 8:30:45\", 28),\n  (\"Cat\",  \"Stevens\",  \"2018-02-20 8:30:45\", 23),\n  (\"Cat\",  \"Stevens\",  \"2018-02-24 8:30:45\", 144)\n).toDF(\"fname\",\"lname\", \"app_date\", \"price\")\n\n\n// Owl Props\nval props1 = new Props()\nprops1.dataset = \"dataset_outlier_nodate\"\nprops1.runId = \"2018-02-24\"\n\n// Owl outliers\nnew Owl(df1, props1).outliersDF( dlKey=\"fname\").createOrReplaceTempView(\"o1\")","user":"anonymous","dateUpdated":"2018-06-24T15:29:56-0400","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","tableHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"df1: org.apache.spark.sql.DataFrame = [fname: string, lname: string ... 2 more fields]\nprops1: com.owl.common.Props = com.owl.common.Props@3a3b3c60\nprops1.dataset: String = dataset_outlier_nodate\nprops1.runId: String = 2018-02-24\n+-----+--------------------+\n|fname|           price_iqr|\n+-----+--------------------+\n| Kirk|[7.9, 18.0, 36.79...|\n|  Cat|  [22.5, 26.0, 57.0]|\n+-----+--------------------+\n\n+-----+--------+------------------+-----+\n|fname|   lname|          app_date|price|\n+-----+--------+------------------+-----+\n| Kirk|Haslbeck|2018-02-24 8:30:45|   18|\n| Kirk|Haslbeck|2018-02-23 8:30:45|   18|\n| Kirk|Haslbeck|2018-02-22 8:30:45|   18|\n| Kirk|Haslbeck|2018-02-21 8:30:45|    8|\n| Kirk|Haslbeck|2018-02-21 8:30:45|    7|\n| Kirk|Haslbeck|2018-02-21 8:30:45|   20|\n| Kirk|Haslbeck|2018-02-20 8:30:45|  188|\n|  Cat| Stevens|2018-02-20 8:30:45|   21|\n|  Cat| Stevens|2018-02-20 8:30:45|   25|\n|  Cat| Stevens|2018-02-20 8:30:45|   27|\n|  Cat| Stevens|2018-02-20 8:30:45|   28|\n|  Cat| Stevens|2018-02-20 8:30:45|   23|\n|  Cat| Stevens|2018-02-24 8:30:45|  144|\n+-----+--------+------------------+-----+\n\n+-----+--------+------------------+-----+-----+--------------------+\n|fname|   lname|          app_date|price|fname|           price_iqr|\n+-----+--------+------------------+-----+-----+--------------------+\n| Kirk|Haslbeck|2018-02-24 8:30:45|   18| Kirk|[7.9, 18.0, 36.79...|\n| Kirk|Haslbeck|2018-02-23 8:30:45|   18| Kirk|[7.9, 18.0, 36.79...|\n| Kirk|Haslbeck|2018-02-22 8:30:45|   18| Kirk|[7.9, 18.0, 36.79...|\n| Kirk|Haslbeck|2018-02-21 8:30:45|    8| Kirk|[7.9, 18.0, 36.79...|\n| Kirk|Haslbeck|2018-02-21 8:30:45|    7| Kirk|[7.9, 18.0, 36.79...|\n| Kirk|Haslbeck|2018-02-21 8:30:45|   20| Kirk|[7.9, 18.0, 36.79...|\n| Kirk|Haslbeck|2018-02-20 8:30:45|  188| Kirk|[7.9, 18.0, 36.79...|\n|  Cat| Stevens|2018-02-20 8:30:45|   21|  Cat|  [22.5, 26.0, 57.0]|\n|  Cat| Stevens|2018-02-20 8:30:45|   25|  Cat|  [22.5, 26.0, 57.0]|\n|  Cat| Stevens|2018-02-20 8:30:45|   27|  Cat|  [22.5, 26.0, 57.0]|\n|  Cat| Stevens|2018-02-20 8:30:45|   28|  Cat|  [22.5, 26.0, 57.0]|\n|  Cat| Stevens|2018-02-20 8:30:45|   23|  Cat|  [22.5, 26.0, 57.0]|\n|  Cat| Stevens|2018-02-24 8:30:45|  144|  Cat|  [22.5, 26.0, 57.0]|\n+-----+--------+------------------+-----+-----+--------------------+\n\n tot: 13  |  lowerB  0.0 \n tot: 13  |  lowerB  0.0 \n tot: 13  |  lowerB  1.0 \n"}]},"apps":[],"jobName":"paragraph_1528605238851_1733055509","id":"20180610-003358_2095513413","dateCreated":"2018-06-10T00:33:58-0400","dateStarted":"2018-06-24T15:30:01-0400","dateFinished":"2018-06-24T15:30:06-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13999"},{"text":"%sql select * from o1","user":"anonymous","dateUpdated":"2018-06-24T15:29:56-0400","config":{"colWidth":6,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":344,"optionOpen":false}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"key\tcolumn\tvalue\tprediction\tconfidence\nKirk\tprice\t188.0\t18.0\t42\nCat\tprice\t144.0\t26.0\t75\n"}]},"apps":[],"jobName":"paragraph_1529609387319_2046419708","id":"20180621-152947_1141583011","dateCreated":"2018-06-21T15:29:47-0400","dateStarted":"2018-06-24T15:30:02-0400","dateFinished":"2018-06-24T15:30:06-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:14000"},{"title":"Outlier -> noKey noDate","text":"\nnew Owl(df, props1).outliersDF().createOrReplaceTempView(\"o2\")\n\n\n\n\n\n\nnew Owl(df1, props1).outliersDF().createOrReplaceTempView(\"o3\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","user":"anonymous","dateUpdated":"2018-06-24T15:29:56-0400","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","title":true,"tableHide":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+--------------------+\n|           price_iqr|\n+--------------------+\n|[10.05, 15.0, 46....|\n+--------------------+\n\n+-----+--------+------------------+-----+\n|fname|   lname|          app_date|price|\n+-----+--------+------------------+-----+\n| Kirk|Haslbeck|2018-02-24 8:30:45|   18|\n| Kirk|Haslbeck|2018-02-23 8:30:45|   11|\n| Kirk|Haslbeck|2018-02-22 8:30:45|   10|\n| Kirk|Haslbeck|2018-02-21 8:30:45|   12|\n| Kirk|Haslbeck|2018-02-20 8:30:45|   10|\n|  Cat| Stevens|2018-02-20 8:30:45|   44|\n|  Cat| Stevens|2018-02-20 8:30:45|   47|\n|  Cat| Stevens|2018-02-24 8:30:45|  144|\n+-----+--------+------------------+-----+\n\n tot: 8  |  lowerB  0.0 \n tot: 8  |  lowerB  0.0 \n tot: 8  |  lowerB  0.0 \n+--------------------+\n|           price_iqr|\n+--------------------+\n|[15.9999999999999...|\n+--------------------+\n\n+-----+--------+------------------+-----+\n|fname|   lname|          app_date|price|\n+-----+--------+------------------+-----+\n| Kirk|Haslbeck|2018-02-24 8:30:45|   18|\n| Kirk|Haslbeck|2018-02-23 8:30:45|   18|\n| Kirk|Haslbeck|2018-02-22 8:30:45|   18|\n| Kirk|Haslbeck|2018-02-21 8:30:45|    8|\n| Kirk|Haslbeck|2018-02-21 8:30:45|    7|\n| Kirk|Haslbeck|2018-02-21 8:30:45|   20|\n| Kirk|Haslbeck|2018-02-20 8:30:45|  188|\n|  Cat| Stevens|2018-02-20 8:30:45|   21|\n|  Cat| Stevens|2018-02-20 8:30:45|   25|\n|  Cat| Stevens|2018-02-20 8:30:45|   27|\n|  Cat| Stevens|2018-02-20 8:30:45|   28|\n|  Cat| Stevens|2018-02-20 8:30:45|   23|\n|  Cat| Stevens|2018-02-24 8:30:45|  144|\n+-----+--------+------------------+-----+\n\n tot: 13  |  lowerB  0.0 \n tot: 13  |  lowerB  0.0 \n tot: 13  |  lowerB  1.0 \n"}]},"apps":[],"jobName":"paragraph_1529609476528_104682310","id":"20180621-153116_1392413317","dateCreated":"2018-06-21T15:31:16-0400","dateStarted":"2018-06-24T15:30:06-0400","dateFinished":"2018-06-24T15:30:12-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:14001"},{"text":"%sql\nselect * from o2","user":"anonymous","dateUpdated":"2018-06-24T15:29:56-0400","config":{"colWidth":6,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":114,"optionOpen":false}}},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"key\tcolumn\tvalue\tprediction\tconfidence\n\tprice\t144.0\t15.0\t70\n"}]},"apps":[],"jobName":"paragraph_1529610799930_-643566766","id":"20180621-155319_1457503197","dateCreated":"2018-06-21T15:53:19-0400","dateStarted":"2018-06-24T15:30:07-0400","dateFinished":"2018-06-24T15:30:12-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:14002"},{"text":"%sql\nselect * from o3\n","user":"anonymous","dateUpdated":"2018-06-24T15:29:56-0400","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"key\tcolumn\tvalue\tprediction\tconfidence\n\tprice\t188.0\t21.0\t55\n\tprice\t144.0\t21.0\t72\n"}]},"apps":[],"jobName":"paragraph_1529612760733_751063383","id":"20180621-162600_1311115866","dateCreated":"2018-06-21T16:26:00-0400","dateStarted":"2018-06-24T15:30:12-0400","dateFinished":"2018-06-24T15:30:12-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:14003"},{"text":"%sql\n","user":"anonymous","dateUpdated":"2018-06-24T15:29:56-0400","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql"},"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1529612928789_-1427355886","id":"20180621-162848_2087771447","dateCreated":"2018-06-21T16:28:48-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:14004"}],"name":"Owl / Outlier Numeric","id":"2DJ17J68P","angularObjects":{"2DFW5AMX7:shared_process":[],"2DG2GK25N:shared_process":[],"2DGRFFZMA:shared_process":[],"2DERM7RYU:shared_process":[],"2DFFH5QGT:shared_process":[],"2DF2PH329:shared_process":[],"2DF55VSFN:shared_process":[],"2DH2XWUQA:shared_process":[],"2DGHUQGA8:shared_process":[],"2DH9U1ABT:shared_process":[],"2DDPWP28H:shared_process":[],"2DEK5Z276:shared_process":[],"2DDTZ2MKK:shared_process":[],"2DGZQPS75:shared_process":[],"2DF6DQ2V6:shared_process":[],"2DDPQKAK4:shared_process":[],"2DDTQYJ7P:shared_process":[],"2DGCHXAN1:shared_process":[],"2DFDNF2GQ:shared_process":[],"2DHD7TD9C:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}